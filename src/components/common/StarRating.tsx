import React from "react";

interface StarRatingProps {
  rating: 1 | 2 | 3 | 4 | 5;
  size?: "sm" | "md" | "lg";
  showText?: boolean;
  onSelect?: (rating: number) => void;
  className?: string;
  selectedRating?: number | null;
}

const StarRating: React.FC<StarRatingProps> = ({
  rating,
  size = "md",
  showText = true,
  onSelect,
  className = "",
  selectedRating = null,
}) => {
  const starSizes = {
    sm: { width: 60, height: 9 },
    md: { width: 72, height: 11 },
    lg: { width: 90, height: 14 },
  };

  const { width, height } = starSizes[size];

  const filledStars = rating;
  const emptyStars = 5 - filledStars;

  const isSelected = selectedRating === rating;

  return (
    <div
      className={`inline-flex items-center gap-2.5 ${
        onSelect ? "cursor-pointer" : ""
      } ${isSelected ? "font-medium" : ""} ${className}`}
      onClick={() => onSelect && onSelect(rating)}
    >
      <svg
        width={width}
        height={height}
        viewBox="0 0 72 11"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        {/* First star */}
        <path
          d="M5.23247 0.533741C5.47405 -0.177914 6.52593 -0.177914 6.76747 0.533741L7.63065 3.07645C7.73871 3.39471 8.04852 3.61019 8.3982 3.61019H11.1914C11.9732 3.61019 12.2983 4.56772 11.6658 5.00754L9.406 6.57902C9.12314 6.77568 9.00476 7.12436 9.11281 7.44261L9.976 9.98532C10.2175 10.697 9.36662 11.2888 8.73408 10.849L6.47436 9.27746C6.1915 9.0808 5.80849 9.0808 5.52564 9.27746L3.26586 10.849C2.6334 11.2888 1.78242 10.697 2.024 9.98532L2.88715 7.44261C2.99519 7.12436 2.87683 6.77568 2.59399 6.57902L0.334213 5.00754C-0.29826 4.56772 0.0267889 3.61019 0.808559 3.61019H3.6018C3.95142 3.61019 4.26127 3.39471 4.36932 3.07645L5.23247 0.533741Z"
          fill={filledStars >= 1 ? "#FFCF31" : "#DEDEDE"}
        />

        {/* Second star */}
        <path
          d="M20.2325 0.533741C20.4741 -0.177914 21.5259 -0.177914 21.7675 0.533741L22.6307 3.07645C22.7387 3.39471 23.0485 3.61019 23.3982 3.61019H26.1914C26.9732 3.61019 27.2983 4.56772 26.6658 5.00754L24.406 6.57902C24.1231 6.77568 24.0048 7.12436 24.1128 7.44261L24.976 9.98532C25.2175 10.697 24.3666 11.2888 23.7341 10.849L21.4744 9.27746C21.1915 9.0808 20.8085 9.0808 20.5256 9.27746L18.2659 10.849C17.6334 11.2888 16.7824 10.697 17.024 9.98532L17.8872 7.44261C17.9952 7.12436 17.8768 6.77568 17.594 6.57902L15.3342 5.00754C14.7017 4.56772 15.0268 3.61019 15.8086 3.61019H18.6018C18.9514 3.61019 19.2613 3.39471 19.3693 3.07645L20.2325 0.533741Z"
          fill={filledStars >= 2 ? "#FFCF31" : "#DEDEDE"}
        />

        {/* Third star */}
        <path
          d="M35.2325 0.533741C35.4741 -0.177914 36.5259 -0.177914 36.7675 0.533741L37.6307 3.07645C37.7387 3.39471 38.0485 3.61019 38.3982 3.61019H41.1914C41.9732 3.61019 42.2983 4.56772 41.6658 5.00754L39.406 6.57902C39.1231 6.77568 39.0048 7.12436 39.1128 7.44261L39.976 9.98532C40.2175 10.697 39.3666 11.2888 38.7341 10.849L36.4744 9.27746C36.1915 9.0808 35.8085 9.0808 35.5256 9.27746L33.2659 10.849C32.6334 11.2888 31.7824 10.697 32.024 9.98532L32.8872 7.44261C32.9952 7.12436 32.8768 6.77568 32.594 6.57902L30.3342 5.00754C29.7017 4.56772 30.0268 3.61019 30.8086 3.61019H33.6018C33.9514 3.61019 34.2613 3.39471 34.3693 3.07645L35.2325 0.533741Z"
          fill={filledStars >= 3 ? "#FFCF31" : "#DEDEDE"}
        />

        {/* Fourth star */}
        <path
          d="M50.2325 0.533741C50.4741 -0.177914 51.5259 -0.177914 51.7675 0.533741L52.6307 3.07645C52.7387 3.39471 53.0485 3.61019 53.3982 3.61019H56.1914C56.9732 3.61019 57.2983 4.56772 56.6658 5.00754L54.406 6.57902C54.1231 6.77568 54.0048 7.12436 54.1128 7.44261L54.976 9.98532C55.2175 10.697 54.3666 11.2888 53.7341 10.849L51.4744 9.27746C51.1915 9.0808 50.8085 9.0808 50.5256 9.27746L48.2659 10.849C47.6334 11.2888 46.7824 10.697 47.024 9.98532L47.8872 7.44261C47.9952 7.12436 47.8768 6.77568 47.594 6.57902L45.3342 5.00754C44.7017 4.56772 45.0268 3.61019 45.8086 3.61019H48.6018C48.9514 3.61019 49.2613 3.39471 49.3693 3.07645L50.2325 0.533741Z"
          fill={filledStars >= 4 ? "#FFCF31" : "#DEDEDE"}
        />

        {/* Fifth star */}
        <path
          d="M65.2325 0.533741C65.4741 -0.177914 66.5259 -0.177914 66.7675 0.533741L67.6307 3.07645C67.7387 3.39471 68.0485 3.61019 68.3982 3.61019H71.1914C71.9732 3.61019 72.2983 4.56772 71.6658 5.00754L69.406 6.57902C69.1231 6.77568 69.0048 7.12436 69.1128 7.44261L69.976 9.98532C70.2175 10.697 69.3666 11.2888 68.7341 10.849L66.4744 9.27746C66.1915 9.0808 65.8085 9.0808 65.5256 9.27746L63.2659 10.849C62.6334 11.2888 61.7824 10.697 62.024 9.98532L62.8872 7.44261C62.9952 7.12436 62.8768 6.77568 62.594 6.57902L60.3342 5.00754C59.7017 4.56772 60.0268 3.61019 60.8086 3.61019H63.6018C63.9514 3.61019 64.2613 3.39471 64.3693 3.07645L65.2325 0.533741Z"
          fill={filledStars >= 5 ? "#FFCF31" : "#DEDEDE"}
        />
      </svg>

      {showText && (
        <div className="text-[#636466] font-['Poppins'] text-xs leading-[normal]">
          {rating === 1 ? "(1 Star & Up)" : `(${rating} Stars & Up)`}
        </div>
      )}
    </div>
  );
};

export default StarRating;
